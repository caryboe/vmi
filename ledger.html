<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>View My Investments – Transactions</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <!-- Global/site-wide styles -->
  <link rel="stylesheet" href="/css/styles.css" />
  <!-- Ledger-only styles -->
  <link rel="stylesheet" href="/css/ledger.css" />
</head>
<body>
  <div class="ledger-page">
    <header class="app-header">
      <div class="app-header-left">
        <img
          src="/img/vmi-logo-cropped.png"
          alt="View My Investments Logo"
          class="app-logo"
        />
        <h1 class="app-title desktop-title">ViewMyInvestments.com</h1>
      </div>

      <nav class="app-nav">
        <a href="/index.html" class="nav-link">Dashboard</a>
        <a href="/ledger.html" class="nav-link nav-link-active">Transactions</a>
      </nav>
    </header>

    <!-- Page header + primary add button -->
    <section class="transaction-entry">
      <h1 class="page-title">Transactions</h1>
      <button id="addTransactionBtn" class="btn primary">
        + Add Transaction
      </button>

      <!-- Legacy inline form (kept but hidden, in case it’s ever needed) -->
      <form id="transaction-form" style="display:none;">
        <div class="form-row">
          <label for="tx-account">Account</label>
          <!-- Hard-coded for now: account_id = 2 -->
          <select id="tx-account" name="accountId" required>
            <option value="2">Carrie Roth – Schwab (Roth IRA)</option>
          </select>
        </div>

        <div class="form-row">
          <label for="tx-symbol">Symbol</label>
          <input
            id="tx-symbol"
            name="symbol"
            type="text"
            required
            placeholder="SCHB"
          />
        </div>

        <div class="form-row">
          <label for="tx-type">Type</label>
          <select id="tx-type" name="transactionType" required>
            <option value="BUY">Buy</option>
            <option value="SELL">Sell</option>
          </select>
        </div>

        <div class="form-row">
          <label for="tx-date">Date</label>
          <input id="tx-date" name="transactionDate" type="date" required />
        </div>

        <div class="form-row">
          <label for="tx-shares">Shares</label>
          <input
            id="tx-shares"
            name="shares"
            type="number"
            step="0.0001"
            min="0"
            required
          />
        </div>

        <div class="form-row">
          <label for="tx-price">Price per Share</label>
          <input
            id="tx-price"
            name="price"
            type="number"
            step="0.01"
            min="0"
            required
          />
        </div>

        <div class="form-row">
          <label for="tx-notes">Notes</label>
          <textarea
            id="tx-notes"
            name="notes"
            rows="2"
            placeholder="Optional"
          ></textarea>
        </div>

        <button type="submit" class="btn-primary">Save Transaction</button>
        <span id="tx-status" class="tx-status"></span>
      </form>
    </section>

    <!-- Top actions (filters only now – button moved above) -->
    <div class="ledger-top-bar">
      <div class="ledger-filters">
        <select id="accountFilter">
          <option value="">All accounts</option>
        </select>
        <select id="typeFilter">
          <option value="">All types</option>
          <option value="BUY">Purchases</option>
          <option value="SELL">Sales</option>
        </select>
      </div>
    </div>

	<!-- Desktop table -->
		<div class="ledger-table-wrapper">
  			<div class="mobile-scroll-hint">
    			← Scroll horizontally to see all columns →
  			</div>
  		<table class="ledger-table" id="ledgerTable">	
        <thead>
          <tr>
            <th>Account</th>
            <th>Symbol</th>
            <th>Type</th>
            <th>Date</th>
            <th>Shares</th>
            <th>Price / Share</th>
            <th>Total</th>
            <th>Fees</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          <!-- rows injected by JS -->
        </tbody>
      </table>
    </div>

    <!-- Mobile cards -->
    <div class="ledger-cards" id="ledgerCards">
      <!-- cards injected by JS -->
    </div>

    <!-- Floating + button (mobile only) -->
    <button id="floatingAddBtn" class="floating-add-btn">
      +
    </button>
  </div>

  <!-- Full-screen Add Transaction modal -->
  <div id="transactionModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <header class="modal-header">
        <h2>Add Transaction</h2>
        <button id="modalCloseBtn" class="icon-btn" aria-label="Close">
          ✕
        </button>
      </header>

      <form id="transactionForm" class="modal-body">
        <div class="form-row">
          <label for="accountSelect">Account</label>
          <select id="accountSelect" required>
            <!-- options filled by JS, based on sample data for now -->
          </select>
        </div>

        <div class="form-row">
          <label for="symbolInput">Symbol</label>
          <input id="symbolInput" type="text" required placeholder="VTI" />
        </div>

        <div class="form-row">
          <label for="typeSelect">Type</label>
          <select id="typeSelect" required>
            <option value="BUY">Purchase</option>
            <option value="SELL">Sale</option>
          </select>
        </div>

        <div class="form-row form-row-inline">
          <div>
            <label for="dateInput">Date</label>
            <input id="dateInput" type="date" required />
          </div>
          <div>
            <label for="sharesInput">Shares</label>
            <input
              id="sharesInput"
              type="number"
              step="0.0001"
              min="0"
              required
            />
          </div>
        </div>

        <div class="form-row form-row-inline">
          <div>
            <label for="priceInput">Price / Share</label>
            <input
              id="priceInput"
              type="number"
              step="0.01"
              min="0"
              required
            />
          </div>
          <div>
            <label for="feesInput">Fees (optional)</label>
            <input id="feesInput" type="number" step="0.01" min="0" />
          </div>
        </div>

        <div class="form-row">
          <label>Total (preview)</label>
          <div id="totalPreview" class="total-preview">—</div>
        </div>

        <div class="form-row">
          <label for="notesInput">Notes</label>
          <textarea
            id="notesInput"
            rows="2"
            placeholder="Optional"
          ></textarea>
        </div>

        <footer class="modal-footer">
          <button type="button" id="modalCancelBtn" class="btn secondary">
            Cancel
          </button>
          <button type="submit" class="btn primary">
            Save Transaction
          </button>
        </footer>
      </form>
    </div>
  </div>

  <script src="/js/ledger.js"></script>
</body>
</html>
